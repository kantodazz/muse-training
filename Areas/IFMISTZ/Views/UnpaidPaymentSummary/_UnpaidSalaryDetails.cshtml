@model IEnumerable<IFMIS.Areas.IFMISTZ.Models.UnpaidEmployeeDetailVM>

<style type="text/css">
    * {
        box-sizing: border-box;
    }

    body {
        font-family: 'Gill Sans','lucida grande', helvetica, arial, sans-serif;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        border-spacing: 0;
        margin: 0px;
    }

    td, th {
        border: 1px solid;
        padding: 8px;
    }

    .alinearDerecha {
        text-align: right;
    }

    .negrita {
        font-weight: bold;
    }

    thead {
        display: table-row-group;
    }

    tr {
        page-break-inside: avoid;
    }
</style>



<div class="panel panel-defaul font-family:'Gill Sans','lucida grande', helvetica, arial, sans-serif;" style="text-align: center; padding-top:1px; padding-bottom:1px;margin-top:auto">

    <div class="panel-heading font-family:'Gill Sans','lucida grande', helvetica, arial, sans-serif;" style="text-align: center; padding-top:1px; padding-bottom:1px;margin-top:auto">
        <div class="" style="text-align: center ">
            <img src="@Server.MapPath("~/Media/Images/log.png")" />
        </div>

        <div class="panel-title">MINISTRY OF FINANCE</div>
        <div class="panel-title">UNPAID SALARY DETAILS REPORT</div>
        @*<div class="panel-title">@ViewBag.Currentmonth</div>*@
    </div>

    <br />
    <table id="example" class="display" cellspacing="0" width="100%">

        @{
            int j = 0;
            Decimal SubNET = 0, SubATS = 0, SubATE = 0, SubTOTAL1 = 0;
            Decimal GrandNET = 0, GrandATS = 0, GrandATE = 0, GrandTOTAL1 = 0;
        }

        @foreach (var group in Model.GroupBy(a => a.VoteCode.Replace(" ","")))
        {

            <tr style="background-color:#F5F5F5">
                <td colspan="9">
                    @group.Key - <b>@group.Select(a => a.VoteName).FirstOrDefault()</b>
                </td>
            </tr>

            <tr style="background-color:#F5F5F5">
                <td>#</td>
                <td>Check #</td>
                <td>Full Name</td>
                <td>Check Date</td>
                <td style="text-align: center">Net Amount</td>
                <td style="text-align: center">At Source</td>
                <td style="text-align: center">At Employer</td>
                <td style="text-align: center">Total Amount</td>
                <td>REASON</td>
            </tr>

            foreach (var item in group)
            {
                //SubNET = 0;
                //SubATS = 0;
                //SubATE = 0;
                //SubTOTAL1 = 0;
                //
                j += 1;
                SubNET += Decimal.Parse(item.NetAmount.ToString());
                SubATS += Decimal.Parse(item.AtSource.ToString());
                SubATE += Decimal.Parse(item.AtEmployer.ToString());
                SubTOTAL1 += Decimal.Parse(item.TotalAmout.ToString());


                <tr>
                    <td>@j</td>
                    <td>
                        @item.CheckNo
                    </td>
                    <td style="width:auto">
                        @item.FullName
                    </td>
                    <td style="text-align: center">
                        @*@item.Checkdate*@
                        @Convert.ToDateTime(item.Checkdate).ToString("dd/MM/yyyy")
                    </td>

                    <td style="text-align: right">
                        @String.Format("{0:#,0.00}", item.NetAmount)

                    </td>
                    <td style="text-align: right">
                        @String.Format("{0:#,0.00}", item.AtSource)

                    </td>
                    <td style="text-align: right">
                        @String.Format("{0:#,0.00}", item.AtEmployer)

                    </td>
                    <td style="text-align: right">
                        @String.Format("{0:#,0.00}", item.TotalAmout)
                    </td>

                    <td>
                        @item.Reason
                    </td>

                </tr>
            }

            <tr style="background-color:#F5F5F5">
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>Sub Total</td>
                <td style="text-align: right">@String.Format("{0:#,0.00}", SubNET)</td>
                <td style="text-align: right">@String.Format("{0:#,0.00}", SubATS) </td>
                <td style="text-align: right">@String.Format("{0:#,0.00}", SubATE) </td>
                <td style="text-align: right">@String.Format("{0:#,0.00}", SubTOTAL1) </td>
                <td>&nbsp;</td>
            </tr>



            GrandNET += SubNET;
            GrandATS += SubATS;
            GrandATE += SubATE;
            GrandTOTAL1 += SubTOTAL1;

            SubNET = 0;
            SubATS = 0;
            SubATE = 0;
            SubTOTAL1 = 0;

        }

        <tr style="background-color:#ddd6d6">
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>Grand Total</td>
            <td style="text-align: right">@String.Format("{0:#,0.00}", GrandNET)</td>
            <td style="text-align: right">@String.Format("{0:#,0.00}", GrandATS) </td>
            <td style="text-align: right">@String.Format("{0:#,0.00}", GrandATE) </td>
            <td style="text-align: right">@String.Format("{0:#,0.00}", GrandTOTAL1) </td>
            <td>&nbsp;</td>
        </tr>
    </table>

</div>
