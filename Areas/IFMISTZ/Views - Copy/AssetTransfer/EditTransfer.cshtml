@model IFMIS.Areas.IFMISTZ.Models.AssetTransferVM
@{
    ViewBag.Title = "Edit Transfer";
}
<style type="text/css">
    body {
        margin-top: 40px;
    }

    .stepwizard-step p {
        margin-top: 10px;
    }

    .stepwizard-row {
        display: table-row;
    }

    .stepwizard {
        display: table;
        width: 100%;
        position: relative;
    }

    .stepwizard-step button[disabled] {
        opacity: 1 !important;
        filter: alpha(opacity=100) !important;
    }

    .stepwizard-row:before {
        top: 14px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 100%;
        height: 1px;
        background-color: #ccc;
        z-order: 0;
    }

    .stepwizard-step {
        display: table-cell;
        text-align: center;
        position: relative;
    }

    .loadingImg {
        display: none;
    }

    .search-btn {
        border: 1px solid #ccc;
        border-radius: 4px;
        padding: 5px;
        padding-right: 10px;
    }

    .search-container {
        display: inline-flex;
        flex: 1 1 300px;
        position: relative;
        border: 1px solid #ccc;
        border-radius: 5px;
        overflow: hidden;
        padding-left: 10px;
    }

    .name-input-container {
        display: inline-flex;
        flex: 1 1 300px;
        position: relative;
        overflow: hidden;
    }

    .search-icon {
        padding: 0.5rem;
    }

    .search-button {
        background: #538AC5;
        border: 0;
        color: white;
        padding: 8px;
        border-radius: 0;
    }

    input[type=number] {
        padding: 8px;
        border: 1px solid #ccc;
        width: 205px;
    }

    input[type=text] {
        padding: 5px;
        border: 1px solid #ccc;
    }

    input[type=search] {
        padding: 4px;
        border: hidden;
        border-radius: 4px;
    }

    textarea {
        border: 1px solid #ccc;
    }

    select {
        padding: 8px;
        border: 1px solid #ccc;
        resize: vertical;
        width: 230px;
    }

    .action-btn {
        width: 100px;
        color: white;
    }

    .form-label {
        text-align: right;
    }

    td {
        padding: 5px;
    }

    .info-box {
        padding: 10px;
        background-color: #ECF3F8;
        text-align: center;
        border: 1px solid #ccc;
        border-radius: 5px;
    }
</style>




<div id="content" style="margin: 5px; padding-top: 30px">

    <div class="row">


    </div>


    <!-- widget grid -->
    <section id="widget-grid" class="">


        <!-- START ROW -->

        <div class="row">

            <!-- NEW COL START -->
            <article class="col-sm-12 col-md-12 col-lg-12">

                <!-- Widget ID (each widget will need unique ID)-->
                <div class="jarviswidget" id="wid-id-0" data-widget-editbutton="false" data-widget-custombutton="false" data-widget-colorbutton="false" data-widget-deletebutton="false" data-widget-togglebutton="false">

                    <header>
                        <span class="widget-icon"> <i class="fa fa-edit"></i> </span>
                        <h2> Asset Transfer Entry</h2>

                    </header>


                    <div>
                        <!----WIZARD HEADING -->

                        <div class="stepwizard">
                            <div class="stepwizard-row setup-panel">
                                <div class="stepwizard-step">
                                    <a href="#step-1" type="button" class="btn btn-primary btn-circle">1</a>
                                    <p><strong>Basic Information </strong></p>
                                </div>
                                <div class="stepwizard-step">
                                    <a href="#step-2" type="button" class="btn btn-default btn-circle" disabled="disabled">2</a>
                                    <p><strong>Asset(s) to be transfered</strong></p>
                                </div>
                            </div>
                        </div>
                        <br />
                        <br />
                        <!----WIZARD BODY -->
                        <div align="center">
                            <img src="~/Media/Images/ajax_loader.gif" class="loadingImg" style="display:none" />
                        </div>

                        <!---- STEP 1 START HERE -->

                        <div class="row setup-content" id="step-1">
                            @using (Html.BeginForm(null, null, FormMethod.Post, new { enctype = "multipart/form-data", onsubmit = "return SubmitTransfer(this)" }))
                            {
                                <div class="col-xs-12">


                                    <div class="col-md-12">
                                        @Html.AntiForgeryToken()
                                        @Html.HiddenFor(model => model.AssetTransferId)
                                        @Html.HiddenFor(model => model.ClassId)
                                        <div class="form-horizontal">
                                            <div class="form-group">
                                                @Html.LabelFor(model => model.AssetClassId, htmlAttributes: new { @class = "control-label   col-md-2" })
                                                <div class="col-md-3">
                                                    @Html.DropDownListFor(model => model.AssetClassId, Model.AssetClassList, "Select ", new { @class = "form-control select2", @required = "required" })
                                                    @Html.ValidationMessageFor(model => model.AssetClassId, "", new { @class = "text-danger" })
                                                </div>
                                                @Html.LabelFor(model => model.TransferType, htmlAttributes: new { @class = "control-label col-md-2" })
                                                <div class="col-md-3">
                                                    @Html.DropDownListFor(model => model.TransferType, new List<SelectListItem>{
                                                new SelectListItem{ Text="--Select--", Value = "" },
                                                new SelectListItem{ Text="Within Institution", Value = "Within Institution" },
                                                new SelectListItem{ Text="Between Institution", Value = "Between Institution" },
                                                 }, new { @class = "form-control select2", @required = "required" })
                                                </div>
                                            </div>

                                            <div class="form-group" id="Within">
                                                @Html.LabelFor(model => model.DepartmentFromId, htmlAttributes: new { @class = "control-label   col-md-2" })
                                                <div class="col-md-3">
                                                    @Html.DropDownListFor(model => model.DepartmentFromId, Model.DeptListFrom, "Select Department", new { @class = "form-control select2" })
                                                    @Html.ValidationMessageFor(model => model.DepartmentFromId, "", new { @class = "text-danger" })
                                                </div>
                                                @Html.LabelFor(model => model.DepartmentToId, htmlAttributes: new { @class = "control-label   col-md-2" })
                                                <div class="col-md-3">
                                                    @Html.DropDownListFor(model => model.DepartmentToId, Model.DeptListTo, "Select Department", new { @class = "form-control select2" })
                                                    @Html.ValidationMessageFor(model => model.DepartmentToId, "", new { @class = "text-danger" })
                                                </div>
                                            </div>
                                            <div class="form-group" id="Between">
                                                @Html.LabelFor(model => model.InstitutionFrom, htmlAttributes: new { @class = "control-label   col-md-2" })
                                                <div class="col-md-3">
                                                    @Html.EditorFor(model => model.InstitutionFrom, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly", @autocomplete = "off" } })
                                                    @Html.ValidationMessageFor(model => model.InstitutionFrom, "", new { @class = "text-danger" })
                                                </div>
                                                @Html.LabelFor(model => model.InstitutionToId, htmlAttributes: new { @class = "control-label   col-md-2" })
                                                <div class="col-md-3">
                                                    @Html.DropDownListFor(model => model.InstitutionToId, Model.InstitutionsToList, "Select Institution", new { @class = "form-control select2" })
                                                    @Html.ValidationMessageFor(model => model.InstitutionToId, "", new { @class = "text-danger" })
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                @Html.LabelFor(model => model.Description, htmlAttributes: new { @class = "control-label   col-md-2" })
                                                <div class="col-md-3">
                                                    @Html.EditorFor(model => model.Description, new { htmlAttributes = new { @class = "form-control", autocomplete = "off", rows = "2", maxlength = 250, @required = "required" } })
                                                    @Html.ValidationMessageFor(model => model.Description, "", new { @class = "text-danger" })
                                                </div>
                                            </div>





                                            <div class="row">
                                                <div class="col-md-8 col-md-offset-2">
                                                    <a href="@Url.Action("PendingTransfer","AssetTransfer")" class="btn btn-info pull-left" style="margin-right:8px"><i class="glyphicon glyphicon-arrow-left"></i> Back  </a>
                                                    <button type="submit" class="btn btn-info" style="margin-right:2px">
                                                        <i class="glyphicon glyphicon-floppy-disk"></i> Save
                                                    </button>
                                                    <button class="btn btn-info nextBtn" type="button">Next &nbsp;<span class="glyphicon glyphicon-arrow-right" aria-hidden="true"></span></button>
                                                </div>
                                            </div>
                                            <br />
                                            <br />
                                        </div>
                                    </div>
                                </div>
                            }

                        </div>



                        <!----STEP 2 START HERE -->
                        <div class="row setup-content" id="step-2">
                            <div class="col-xs-12">

                                <div class="col-md-12">
                                    <div class="jarviswidget" data-widget-colorbutton="false" data-widget-colorbutton="false" data-widget-editbutton="false" data-widget-togglebutton="false" data-widget-deletebutton="false" data-widget-fullscreenbutton="false" data-widget-custombutton="false">

                                        <header>
                                            <h2><strong></strong> <i></i></h2>

                                            <ul id="widget-tab-1" class="nav nav-tabs pull-right">

                                                <li class="active">

                                                    <a data-toggle="tab" href="#hr1"> <i class="fa fa-lg fa-arrow-circle-o-down"></i> <span class="hidden-mobile hidden-tablet"> List of Assets to be transfered<span class="badge inbox-badge margin-right-13 items_count" style="background-color:#2196F3"></span></span> </a>

                                                </li>

                                            </ul>

                                        </header>

                                        <!-- widget div-->
                                        <div>

                                            <!-- widget edit box -->
                                            <div class="jarviswidget-editbox">
                                                <!-- This area used as dropdown edit box -->

                                            </div>
                                            <!-- end widget edit box -->
                                            <!-- widget content -->
                                            <div class="widget-body no-padding">

                                                <!-- widget body text-->

                                                <div class="tab-content padding-10">
                                                    <div class="tab-pane fade in active" id="hr1">
                                                        <div class="widget-body no-padding">

                                                            <br />
                                                            <div class="row" id="bind_gl">

                                                                <div class="col-xs-8 col-sm-4 col-md-4 col-lg-4 col-md-offset-1">
                                                                    <a href="#" class="btn btn-info" style="border-radius:1px;" onclick="SearchAsset()">
                                                                        <i class="fa fa-plus"></i>Add Asset
                                                                    </a>

                                                                </div>
                                                                <div class="col-xs-3 col-sm-7 col-md-7 col-lg-7 text-right">



                                                                </div>

                                                            </div>

                                                            <br />



                                                            <div class="custom-scroll" style="height:170px; overflow-y: scroll;">
                                                                <div id="divTableBody">


                                                                    @if (Model.AssetClass == "Furnitures/Equipments" || Model.AssetClass == "Furniture/Equipments")
                                                                    {
                                                                        <table class="table  table-bordered table-hover table-condensed" id="dt_assets" style="width:100%">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th style="text-align:center;width:4%">#</th>
                                                                                    <th style="width:4%">ID</th>
                                                                                    <th>Asset ID</th>
                                                                                    <th style="text-align:left">Asset Name</th>
                                                                                    <th style="text-align:right">Asset value-@Html.DisplayFor(model => model.Currency)</th>
                                                                                    <th>Department</th>
                                                                                    <th>Building</th>
                                                                                    <th style="text-align:center">Floor</th>
                                                                                    <th style="text-align:center">Room</th>
                                                                                    <th style="text-align:center">Rel</th>
                                                                                    <th style="text-align:center">Action</th>
                                                                                </tr>
                                                                            </thead>

                                                                            <tbody>
                                                                                @for (var i = 0; i < Model.AssetDetails.Count(); i++)
                                                                                {
                                                                                    var j = i + 1;
                                                                                    <tr>
                                                                                        <td style="text-align:center">@j</td>
                                                                                        <td style="width:4%">

                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].AssetDetailId)

                                                                                        </td>
                                                                                        <td>

                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].AssetNo)

                                                                                        </td>
                                                                                        <td>
                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].AssetName)

                                                                                        </td>

                                                                                        <td style="text-align:right">
                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].AssetValue)

                                                                                        </td>

                                                                                        <td>

                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].InstitutionSubLevel.SubLevelCode) @Html.DisplayFor(modelItem => Model.AssetDetails[i].InstitutionSubLevel.SubLevelDesc)

                                                                                        </td>
                                                                                        <td>
                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].Building)


                                                                                        </td>
                                                                                        <td style="text-align:center">
                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].Floor)


                                                                                        </td>
                                                                                        <td style="text-align:center">
                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].Room)


                                                                                        </td>
                                                                                        <td style="text-align:center">
                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].RemainEconomicLife)


                                                                                        </td>
                                                                                        <td style="text-align:center">
                                                                                            <div class="btn-group">
                                                                                                <button type="button" class="btn btn-info btn-xs dropdown-toggle" data-toggle="dropdown" style="width:40px;border-radius:1px;" aria-haspopup="true" aria-expanded="false">
                                                                                                    <span class="caret"></span>
                                                                                                    <span class="sr-only">Toggle Dropdown</span>
                                                                                                </button>
                                                                                                <ul class="dropdown-menu">
                                                                                                    <li><a href="#" onclick="removeAsset(@Model.AssetDetails[i].AssetDetailId)" class="btn-xs edit"><i class="fa fa-edit"></i> Remove</a></li>

                                                                                                </ul>
                                                                                            </div>

                                                                                        </td>
                                                                                    </tr>
                                                                                }
                                                                            </tbody>
                                                                        </table>
                                                                    }
                                                                    else if (Model.AssetClass == "Motor Vehicle/Motor Cycle/Plants & Machinery")
                                                                    {
                                                                        <table class="table  table-bordered table-hover table-condensed" id="dt_assets" style="width:100%">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th style="text-align:center;width:4%">#</th>
                                                                                    <th style="width:4%">ID</th>
                                                                                    <th>Asset ID</th>
                                                                                    <th style="text-align:left">Description</th>
                                                                                    <th style="text-align:right">Asset value-@Html.DisplayFor(model => model.Currency)</th>
                                                                                    <th>Department</th>
                                                                                    <th>Model</th>
                                                                                    <th>BodyType</th>
                                                                                    <th style="text-align:center">YOM</th>
                                                                                    <th style="text-align:center">Rel</th>
                                                                                    <th style="text-align:center">Action</th>
                                                                                </tr>
                                                                            </thead>

                                                                            <tbody>
                                                                                @for (var i = 0; i < Model.AssetDetails.Count(); i++)
                                                                                {
                                                                                    var j = i + 1;
                                                                                    <tr>
                                                                                        <td style="text-align:center">@j</td>
                                                                                        <td style="width:4%">

                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].AssetDetailId)

                                                                                        </td>
                                                                                        <td>

                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].AssetNo)

                                                                                        </td>
                                                                                        <td>
                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].AssetName)

                                                                                        </td>

                                                                                        <td style="text-align:right">
                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].AssetValue)

                                                                                        </td>

                                                                                        <td>

                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].InstitutionSubLevel.SubLevelCode) @Html.DisplayFor(modelItem => Model.AssetDetails[i].InstitutionSubLevel.SubLevelDesc)

                                                                                        </td>
                                                                                        <td>
                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].AssetModel)


                                                                                        </td>
                                                                                        <td>
                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].BodyType)


                                                                                        </td>
                                                                                        <td style="text-align:center">
                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].YearOfManufacture)


                                                                                        </td>
                                                                                        <td style="text-align:center">
                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].RemainEconomicLife)


                                                                                        </td>
                                                                                        <td style="text-align:center">
                                                                                            <div class="btn-group">
                                                                                                <button type="button" class="btn btn-info btn-xs dropdown-toggle" data-toggle="dropdown" style="width:40px;border-radius:1px;" aria-haspopup="true" aria-expanded="false">
                                                                                                    <span class="caret"></span>
                                                                                                    <span class="sr-only">Toggle Dropdown</span>
                                                                                                </button>
                                                                                                <ul class="dropdown-menu">
                                                                                                    <li><a href="#" onclick="removeAsset(@Model.AssetDetails[i].AssetDetailId)" class="btn-xs edit"><i class="fa fa-edit"></i> Remove</a></li>

                                                                                                </ul>
                                                                                            </div>
                                                                                        </td>
                                                                                    </tr>
                                                                                }
                                                                            </tbody>
                                                                        </table>

                                                                    }
                                                                    else if (Model.AssetClass == "Land")
                                                                    {
                                                                        <table class="table  table-bordered table-hover table-condensed" id="dt_assets" style="width:100%">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th style="text-align:center;width:4%">#</th>
                                                                                    <th style="width:4%">ID</th>
                                                                                    <th>Title Deed No</th>
                                                                                    <th style="text-align:left">Description</th>
                                                                                    <th style="text-align:right">Asset value-@Html.DisplayFor(model => model.Currency)</th>
                                                                                    <th>Department</th>
                                                                                    <th>Size</th>
                                                                                    <th>Usage</th>
                                                                                    <th style="text-align:center">Rel</th>
                                                                                    <th style="text-align:center">Action</th>
                                                                                </tr>
                                                                            </thead>

                                                                            <tbody>
                                                                                @for (var i = 0; i < Model.AssetDetails.Count(); i++)
                                                                                {
                                                                                    var j = i + 1;
                                                                                    <tr>
                                                                                        <td style="text-align:center">@j</td>
                                                                                        <td style="width:4%">

                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].AssetDetailId)

                                                                                        </td>
                                                                                        <td>

                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].AssetNo)

                                                                                        </td>
                                                                                        <td>
                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].AssetName)

                                                                                        </td>

                                                                                        <td style="text-align:right">
                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].AssetValue)

                                                                                        </td>

                                                                                        <td>

                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].InstitutionSubLevel.SubLevelCode) @Html.DisplayFor(modelItem => Model.AssetDetails[i].InstitutionSubLevel.SubLevelDesc)

                                                                                        </td>
                                                                                        <td>
                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].Size)


                                                                                        </td>
                                                                                        <td>
                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].Usage)


                                                                                        </td>
                                                                                        <td style="text-align:center">
                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].RemainEconomicLife)


                                                                                        </td>
                                                                                        <td style="text-align:center">
                                                                                            <div class="btn-group">
                                                                                                <button type="button" class="btn btn-info btn-xs dropdown-toggle" data-toggle="dropdown" style="width:40px;border-radius:1px;" aria-haspopup="true" aria-expanded="false">
                                                                                                    <span class="caret"></span>
                                                                                                    <span class="sr-only">Toggle Dropdown</span>
                                                                                                </button>
                                                                                                <ul class="dropdown-menu">
                                                                                                    <li><a href="#" onclick="removeAsset(@Model.AssetDetails[i].AssetDetailId)" class="btn-xs edit"><i class="fa fa-edit"></i> Remove</a></li>

                                                                                                </ul>
                                                                                            </div>
                                                                                        </td>
                                                                                    </tr>
                                                                                }
                                                                            </tbody>
                                                                        </table>
                                                                    }
                                                                    else if (Model.AssetClass == "Buildings")
                                                                    {
                                                                        <table class="table  table-bordered table-hover table-condensed" id="dt_assets" style="width:100%">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th style="text-align:center;width:4%">#</th>
                                                                                    <th style="width:4%">ID</th>
                                                                                    <th>Asset ID</th>
                                                                                    <th style="text-align:left">Asset Description</th>
                                                                                    <th style="text-align:right">Asset value-@Html.DisplayFor(model => model.Currency)</th>
                                                                                    <th>Department</th>
                                                                                    <th style="text-align:center">NumberOfStorey</th>
                                                                                    <th style="text-align:center">PlotNumber</th>
                                                                                    <th>Usage</th>
                                                                                    <th style="text-align:center">Rel</th>
                                                                                    <th style="text-align:center">Action</th>
                                                                                </tr>
                                                                            </thead>

                                                                            <tbody>
                                                                                @for (var i = 0; i < Model.AssetDetails.Count(); i++)
                                                                                {
                                                                                    var j = i + 1;
                                                                                    <tr>
                                                                                        <td style="text-align:center">@j</td>
                                                                                        <td style="width:4%">

                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].AssetDetailId)

                                                                                        </td>
                                                                                        <td>

                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].AssetNo)

                                                                                        </td>
                                                                                        <td>
                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].AssetName)

                                                                                        </td>

                                                                                        <td style="text-align:right">
                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].AssetValue)

                                                                                        </td>

                                                                                        <td>

                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].InstitutionSubLevel.SubLevelCode) @Html.DisplayFor(modelItem => Model.AssetDetails[i].InstitutionSubLevel.SubLevelDesc)

                                                                                        </td>
                                                                                        <td style="text-align:center">
                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].NumberOfStorey)


                                                                                        </td>
                                                                                        <td style="text-align:center">
                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].PlotNumber)


                                                                                        </td>
                                                                                        <td>
                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].Usage)


                                                                                        </td>
                                                                                        <td style="text-align:center">
                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].RemainEconomicLife)


                                                                                        </td>
                                                                                        <td style="text-align:center">
                                                                                            <div class="btn-group">
                                                                                                <button type="button" class="btn btn-info btn-xs dropdown-toggle" data-toggle="dropdown" style="width:40px;border-radius:1px;" aria-haspopup="true" aria-expanded="false">
                                                                                                    <span class="caret"></span>
                                                                                                    <span class="sr-only">Toggle Dropdown</span>
                                                                                                </button>
                                                                                                <ul class="dropdown-menu">
                                                                                                    <li><a href="#" onclick="removeAsset(@Model.AssetDetails[i].AssetDetailId)" class="btn-xs edit"><i class="fa fa-edit"></i> Remove</a></li>

                                                                                                </ul>
                                                                                            </div>
                                                                                        </td>
                                                                                    </tr>
                                                                                }
                                                                            </tbody>
                                                                        </table>


                                                                    }
                                                                    else if (Model.AssetClass == "Roads")
                                                                    {
                                                                        <table class="table  table-bordered table-hover table-condensed" id="dt_assets" style="width:100%">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th style="text-align:center;width:4%">#</th>
                                                                                    <th style="width:4%">ID</th>
                                                                                    <th>Asset ID</th>
                                                                                    <th style="text-align:left">Asset Description</th>
                                                                                    <th style="text-align:right">Asset value-@Html.DisplayFor(model => model.Currency)</th>
                                                                                    <th>Department</th>
                                                                                    <th>Type</th>
                                                                                    <th>LoadLength</th>
                                                                                    <th>From</th>
                                                                                    <th>To</th>
                                                                                    <th style="text-align:center">Rel</th>
                                                                                    <th style="text-align:center">Action</th>
                                                                                </tr>
                                                                            </thead>

                                                                            <tbody>
                                                                                @for (var i = 0; i < Model.AssetDetails.Count(); i++)
                                                                                {
                                                                                    var j = i + 1;
                                                                                    <tr>
                                                                                        <td style="text-align:center">@j</td>
                                                                                        <td style="width:4%">

                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].AssetDetailId)

                                                                                        </td>
                                                                                        <td>

                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].AssetNo)

                                                                                        </td>
                                                                                        <td>
                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].AssetName)

                                                                                        </td>

                                                                                        <td style="text-align:right">
                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].AssetValue)

                                                                                        </td>

                                                                                        <td>

                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].InstitutionSubLevel.SubLevelCode) @Html.DisplayFor(modelItem => Model.AssetDetails[i].InstitutionSubLevel.SubLevelDesc)

                                                                                        </td>
                                                                                        <td>
                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].Type)


                                                                                        </td>
                                                                                        <td>
                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].RoadLength)


                                                                                        </td>
                                                                                        <td>
                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].RoadFrom)


                                                                                        </td>
                                                                                        <td>
                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].RoadTo)


                                                                                        </td>
                                                                                        <td style="text-align:center">
                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].RemainEconomicLife)


                                                                                        </td>
                                                                                        <td style="text-align:center">
                                                                                            <div class="btn-group">
                                                                                                <button type="button" class="btn btn-info btn-xs dropdown-toggle" data-toggle="dropdown" style="width:40px;border-radius:1px;" aria-haspopup="true" aria-expanded="false">
                                                                                                    <span class="caret"></span>
                                                                                                    <span class="sr-only">Toggle Dropdown</span>
                                                                                                </button>
                                                                                                <ul class="dropdown-menu">
                                                                                                    <li><a href="#" onclick="removeAsset(@Model.AssetDetails[i].AssetDetailId)" class="btn-xs edit"><i class="fa fa-edit"></i> Remove</a></li>

                                                                                                </ul>
                                                                                            </div>
                                                                                        </td>
                                                                                    </tr>
                                                                                }
                                                                            </tbody>
                                                                        </table>

                                                                    }
                                                                    else if (Model.AssetClass == "Biological Assets")
                                                                    {
     
                                                                        <table class="table  table-bordered table-hover table-condensed" id="dt_assets" style="width:100%">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th style="text-align:center;width:4%">#</th>
                                                                                    <th style="width:4%">ID</th>
                                                                                    <th>Identification No</th>
                                                                                    <th style="text-align:left">Asset Description</th>
                                                                                    <th style="text-align:right">Asset value-@Html.DisplayFor(model => model.Currency)</th>
                                                                                    <th>Department</th>
                                                                                    <th style="text-align:center">Sex</th>
                                                                                    <th style="text-align:center">Age</th>
                                                                                    <th style="text-align:center">Quantity</th>
                                                                                    <th style="text-align:center">Rel</th>
                                                                                    <th style="text-align:center">Action</th>
                                                                                </tr>
                                                                            </thead>

                                                                            <tbody>
                                                                                @for (var i = 0; i < Model.AssetDetails.Count(); i++)
                                                                                {
                                                                                    var j = i + 1;
                                                                                    <tr>
                                                                                        <td style="text-align:center">@j</td>
                                                                                        <td style="width:4%">

                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].AssetDetailId)

                                                                                        </td>
                                                                                        <td>

                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].AssetNo)

                                                                                        </td>
                                                                                        <td>
                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].AssetName)

                                                                                        </td>

                                                                                        <td style="text-align:right">
                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].AssetValue)

                                                                                        </td>

                                                                                        <td>

                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].InstitutionSubLevel.SubLevelCode) @Html.DisplayFor(modelItem => Model.AssetDetails[i].InstitutionSubLevel.SubLevelDesc)

                                                                                        </td>
                                                                                        <td style="text-align:center">
                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].Sex)


                                                                                        </td>
                                                                                        <td style="text-align:center">
                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].BiologicalAssetAge)


                                                                                        </td>
                                                                                        <td style="text-align:center">
                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].Quantity)


                                                                                        </td>
                                                                                        <td style="text-align:center">
                                                                                            @Html.DisplayFor(modelItem => Model.AssetDetails[i].RemainEconomicLife)


                                                                                        </td>
                                                                                        <td style="text-align:center">
                                                                                            <div class="btn-group">
                                                                                                <button type="button" class="btn btn-info btn-xs dropdown-toggle" data-toggle="dropdown" style="width:40px;border-radius:1px;" aria-haspopup="true" aria-expanded="false">
                                                                                                    <span class="caret"></span>
                                                                                                    <span class="sr-only">Toggle Dropdown</span>
                                                                                                </button>
                                                                                                <ul class="dropdown-menu">
                                                                                                    <li><a href="#" onclick="removeAsset(@Model.AssetDetails[i].AssetDetailId)" class="btn-xs edit"><i class="fa fa-edit"></i> Remove</a></li>

                                                                                                </ul>
                                                                                            </div>
                                                                                        </td>

                                                                                    </tr>
                                                                                }
                                                                            </tbody>
                                                                        </table>
                                                                    }


                                                                </div>
                                                            </div>



                                                        </div>

                                                    </div>

                                                </div>

                                                <!-- end widget body text-->
                                                <!-- widget footer -->
                                                <div class="widget-footer text-right">

                                                    <span class="onoffswitch-title">

                                                    </span>


                                                </div>
                                                <!-- end widget footer -->

                                            </div>
                                            <!-- end widget content -->

                                        </div>
                                        <!-- end widget div -->

                                    </div>
                                    <div class="col-md-offset-2">
                                        <a href="#step-2" style="margin-right:5px" class="btn btn-info pull-left btn-prev"><i class="glyphicon glyphicon-arrow-left"></i> Back  </a>

                                        <button type="button" id="finish" class="btn btn-info" style="margin-right:2px">
                                            <i class="glyphicon glyphicon-floppy-disk"></i> Finish and Exit
                                        </button>
                                    </div>
                                    <br />
                                    <br />
                                </div>
                            </div>
                        </div>


                    </div>





                </div>

            </article>

        </div>
    </section>

</div>
<div class="modal fade" id="divModal" tabindex="-1" role="dialog" aria-labelledby="lblmodal">
    <div class="modal-dialog modal-lg" style="width:80%;">
        <div width="90%" class="modal-content">
            <div class="modal-header alert alert-info" style="font:bold 16px Trebuchet MS, Lucida Sans Unicode, Lucida Grande, Lucida Sans, Arial, sans-serif">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="lblmodal">
                    Select Asset
                </h4>
            </div>
            <div class="modal-body" id="divModalBody">

            </div>

            <div id="divPaymentStatusLoader" style="text-align:center; display:none">
                <img src="~/assets/img/avatars/ajax_loader.gif" />
            </div>
        </div>
    </div>

</div>
@section pagespecific {
    <!-- PAGE RELATED PLUGIN(S) -->

    <script type="text/javascript">
        var dt_assets = $('#dt_assets').dataTable();
        $("#dt_assets_wrapper .dt-toolbar").remove();
        function SearchAsset() {
            var id = $("#AssetTransferId").val();
            if (id > 0) {
                var classId = $("#ClassId").val();
             var url = '@Url.Action("GetAssets", "AssetTransfer")';
                $("#divModalBody").load(url, { id, classId }, function (response, status, xhr) {
                if (status == "error") {
                    $("#divModalBody").html("Error on accessing this details, contact system support.");
                }
                    dt_assets = $('#divModalBody #dt_assets').dataTable();
                $("#divModal").modal("show");
            });



            } else {
                swal("Please first save data on previous step");
                return false;
            }

        }
        function assetClicked(id) {
            var transferId = $("#AssetTransferId").val();
            var url = '@Url.Action("SelectedAsset", "AssetTransfer")';
            $("#divModal").modal("hide");
            $("#divTableBody").load(url, { id, transferId }, function (response, status, xhr) {
                if (status == "error") {
                    $("#divTableBody").html("Error on accessing this details, contact system support.");
                }
                dt_assets_list = $('#divTableBody #dt_assets_list').dataTable();
            });

        }

        function SubmitTransfer(formData) {
            var url = '@Url.Action("SaveTransfer", "AssetTransfer")';
            var ajaxConfig = {
                type: "post",
                url: url,
                data: new FormData(formData),
                success: function (result) {
                    if (result.response == "Success") {
                        swal("Data saved  successfully", { icon: "Success" })
                              .then((value) => {
                                  $("#AssetTransferId").val(result.id);
                                  $("#ClassId").val(result.classId);
                                });
                    }
                    else {
                        swal(result);
                    }
                }
            }

            if ($(formData).attr('enctype') == "multipart/form-data") {
                ajaxConfig["contentType"] = false;
                ajaxConfig["processData"] = false;
            }
            $.ajax(ajaxConfig);
            return false;
        }
        function removeAsset(id) {
            var transferId = $("#AssetTransferId").val();
            swal({
                title: 'Confirmation',
                text: "Do you remove this asset ?",
                buttons: [
                    'No',
                    'Yes'
                ],
            }).then(function (isConfirm) {
                if (isConfirm) {
                    var url = '@Url.Action("RemoveAsset", "AssetTransfer")';
                    $("#divTableBody").load(url, { id, transferId }, function (response, status, xhr) {
                        if (status == "error") {
                            $("#divTableBody").html("Error on accessing this details, contact system support.");
                        }
                        dt_assets_list = $('#divTableBody #dt_assets_list').dataTable();
                    });
                } else {
                    swal("Cancelled", "No change was made");
                }
            });
        }
        // =========== End Save Inventory ====================
            $(document).ready(function () {

                //MANAGE STEP WIZARD
                var navListItems = $('div.setup-panel div a'),
                    allWells = $('.setup-content'),
                    allNextBtn = $('.nextBtn');

                allWells.hide();

                navListItems.click(function (e) {
                    e.preventDefault();
                    var $target = $($(this).attr('href')),
                        $item = $(this);

                    if (!$item.hasClass('disabled')) {
                        navListItems.removeClass('btn-primary').addClass('btn-default');
                        $item.addClass('btn-primary');
                        allWells.hide();
                        $target.show();
                        $target.find('input:eq(0)').focus();
                    }
                });

                allNextBtn.click(function () {
                    var curStep = $(this).closest(".setup-content"),
                        curStepBtn = curStep.attr("id"),
                        nextStepWizard = $('div.setup-panel div a[href="#' + curStepBtn + '"]').parent().next().children("a"),
                        curInputs = curStep.find("input[type='text'],input[type='url']"),
                        isValid = true;

                    $(".form-group").removeClass("has-error");
                    for (var i = 0; i < curInputs.length; i++) {
                        if (!curInputs[i].validity.valid) {
                            isValid = false;
                            $(curInputs[i]).closest(".form-group").addClass("has-error");
                        }
                    }

                    if (isValid)
                        nextStepWizard.removeAttr('disabled').trigger('click');
                });

                $('div.setup-panel div a.btn-primary').trigger('click');
                            //END MANAGE STEP WIZARD

            $(function(){
              $('input[type="radio"][name="CanExpire"]').click(function(){
                if ($(this).is(':checked'))
                {
                  if ($(this).val()=="Yes") {
                        $(".expire").show();
                    } else {
                        $(".expire").hide();
                    }
                }
              });
             });

                //MANAGE SELECTED DATE
                $(function () {
                    $("#ExpireDate").change(function () {
                        var expire_date = $(this).val();
                        var manufacture_date = $("#ManufactureDate").val();
                        if (manufacture_date) {
                            if (expire_date) {
                                if (manufacture_date > expire_date) {
                                    swal("Please select date which is greater than the manufacture date");
                                    $("#ExpireDate").val("");
                                }

                            }
                        }


                    });
                });

               $(function () {
                   $("#UOM").change(function () {
                       var selected_uom = $(this).val();
                       if (uom) {
                       if (selected_uom != uom) {
                           $(this).prop('selectedIndex', 0);
                           swal("Please unit of measure must match with that of item card.Otherwise create new item card with UOM of " + selected_uom + ' !');
                       }
                              }
                    });
                });

                              $(function () { // this will be called when the DOM is ready
                                $("#UnitPrice").keyup(function () {

                                    var quantity = parseFloat($("#Quantity").val());
                                    if (quantity > 0) {
                                   var unit_price = parseFloat($("#UnitPrice").val().split(",").join(""));
                                        var total = unit_price * quantity;
                                        $("#InventoryValue").val(total.toLocaleString('en'));
                                    }

                                });

                            });
                            $(function () { // this will be called when the DOM is ready
                                $("#Quantity").keyup(function () {

                                    var unit_price = parseFloat($("#UnitPrice").val().split(",").join(""));
                                    if (unit_price > 0) {
                                        var quantity = parseFloat($("#Quantity").val());
                                        var total = unit_price * quantity;

                                            $("#InventoryValue").val(total.toLocaleString('en'));

                                        }

                                });

                            });

                        });
               $(function () { // this will be called when the DOM is ready
                     $("#UnitPrice").keyup(function () {
                     var quantity = $("#Quantity").val();
                          if (quantity > 0) {
                          var unit_price = parseFloat($(this).val().split(",").join(""));
                          var total = unit_price * quantity;
                         $("#TotalAmount").val(total.toLocaleString('en'));
                             }

                   });

               });
                     $(function () { // this will be called when the DOM is ready
                                $("#Quantity").keyup(function () {

                                    var unit_price = parseFloat($("#UnitPrice").val().split(",").join(""));
                                    if (unit_price > 0) {
                                        var quantity = $(this).val();
                                        var total = unit_price * quantity;
                                            $("#TotalAmount").val(total.toLocaleString('en'));
                                    }

                                });

                            });
           var transfer_type = '@(Model.TransferType)';
                if (transfer_type == "Within Institution") {
                    $("#Within").show();
                    $("#Between").hide();
                    $("#DepartmentFrom").prop('required', true);
                    $("#DepartmentTo").prop('required', true);
                    $("#InstitutionTo").prop('required', false);

                } else {
                    //Otherwise Between institution selected
                    $("#Within").hide();
                    $("#Between").show();
                    $("#DepartmentFrom").prop('required', false);
                    $("#DepartmentTo").prop('required', false);
                    $("#InstitutionTo").prop('required', true);

                }
        $("#TransferType").change(function () {
            debugger
            var type = $(this).val();
            if (type == "Within Institution") {
                $("#Within").show();
                $("#Between").hide();
                $("#DepartmentFrom").prop('required', true);
                $("#DepartmentTo").prop('required', true);
                $("#InstitutionTo").prop('required', false);
            }
            else {
                //Otherwise Between institution selected
                $("#Within").hide();
                $("#Between").show();
                $("#DepartmentFrom").prop('required', false);
                $("#DepartmentTo").prop('required', false);
                $("#InstitutionTo").prop('required', true);
            }

        });
           $("#finish").click(function (e) {
               var id = $("#AssetTransferId").val();
                                if (id > 0) {

                                    swal("Transfer added successfully", { icon: "success" })
                                                  .then((value) => {
                                                      var url = '@Url.Action("PendingTransfer", "AssetTransfer")';
                                                      window.location.replace(url);
                                                  });
                                } else {
                                    swal("Click Back button");
                                }

                            });

            //SHOW LOADER ICON
    $(document).ajaxStart(function () {
        $(".loadingImg").show();

    });
    //HIDE LOADER ICON
    $(document).ajaxStop(function () {
        $(".loadingImg").hide();
    });

    </script>
}



