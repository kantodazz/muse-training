
@{
    ViewBag.Title = "Reports Configuration List";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style type="text/css">
    .loadingImg {
        display: none;
    }
</style>
<div id="content" style="margin: 5px; padding-top: 50px">
    <div class="row"></div>
    <!-- widget grid -->
    <section id="widget-grid" class="">
        <div class="row">
            <!-- NEW COL START -->
            <article class="col-sm-12 col-md-12 col-lg-12">

                <!-- Widget ID (each widget will need unique ID)-->
                <div class="jarviswidget" id="wid-id-0" data-widget-editbutton="false" data-widget-custombutton="false" data-widget-colorbutton="false" data-widget-deletebutton="false" data-widget-togglebutton="false">

                    <header>
                        <span class="widget-icon"> <i class="fa fa-edit"></i> </span>
                        <h2> @ViewBag.Title</h2>
                    </header>

                    <div class="widget-body">
                        @*<a href="#" onclick="showCreateModal()" class="btn btn-info">
                            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                            Add New
                        </a>*@

                        <hr />
                        <!-- widget edit box -->
                        <div class="jarviswidget-editbox">
                            <!-- This area used as dropdown edit box -->
                        </div>
                        <table class="table table-striped table-bordered table-hover table-condensed" id="tblReportConfig">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th style="width: 70%">Client Name</th>
                                    @*<th>Report Name</th>*@
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </article>

        </div>
    </section>
</div>
@section pagespecific {
    <!-- PAGE RELATED PLUGIN(S) -->
    <script type="text/javascript">
        var datatable = $("#tblReportConfig").dataTable();
        
        $.ajax({
            type: "get",
            url: '@Url.Action("GetReportConfigurations", "ReportConfiguration")',
            contenttype: "application/json; charset=utf-8",
            datatype: "json",
            success: function (response) {
                data = response.data;
                datatable.fnClearTable();
                for (var i = 0; i < data.length; i++)
                {
                    datatable.fnAddData([i + 1,
                        data[i]["Client"],
                        '<div class="btn-group" id="drop-' + i + '">\
                            <button type="button" class="btn btn-info btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\
                                <span class="caret"></span\
                                    <span class="sr-only"></span>\
                            </button>\
                            <ul class="dropdown-menu">\
                            <li><a href="@Url.Action("ReportContentList", "ReportConfiguration")/?id='+ data[i]["ClientInformationId"] +'">Add Report Details</a></li>\
                            </ul>\
                        </div>\ '
                    ]);
                }
            },
            failure: function (error)
            {
                swal(error);
            }
        });
    </script>
}




