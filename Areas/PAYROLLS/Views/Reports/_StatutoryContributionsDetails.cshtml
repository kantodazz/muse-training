@model IEnumerable<IFMIS.Areas.PAYROLLS.Models.DeductionReportSubTreasury_vw2>
 
<style type="text/css">
    * {
        box-sizing: border-box;
    }

    body {
        font-family: 'Gill Sans','lucida grande', helvetica, arial, sans-serif;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        border-spacing: 0;
        margin: 0px;
    }

    td, th {
        border: 1px solid;
        padding: 8px;
    }

    .alinearDerecha {
        text-align: right;
    }

    .negrita {
        font-weight: bold;
    }

    thead {
        display: table-row-group;
    }

    tr {
        page-break-inside: avoid;
    }
</style>

<div class="panel panel-default">

    <div class="panel-heading font-family:'Gill Sans','lucida grande', helvetica, arial, sans-serif;" style="text-align: center; padding-top:1px; padding-bottom:1px;margin-top:auto">
        <div class="" style="text-align: center ">
            <img src="@Server.MapPath("~/Media/Images/log.png")" />
        </div>

        <div class="panel-title">MINISTRY OF FINANCE AND PLANNING</div>
        <div class="panel-title">EMPLOYEES STATUTORY CONTRIBUTIONS AND DEDUCTIONS BY VOTE</div>
        <div class="panel-title"> @ViewBag.Currentmonth</div>
    </div>

    <br />
    <table class="table table-bordered table-condensed table-striped" style="border-bottom: 1px solid black">
        @{
            int i = 0;
            Decimal TRA = 0, NHIF = 0, PSSSF = 0, ZSSF = 0, TUGHE = 0, TALGWU = 0, CWT = 0, TOTAL = 0;
            Decimal GTRA = 0, GNHIF = 0, GPSSSF = 0, GNSSF = 0, GZSSF = 0, GTUGHE = 0, GTALGWU = 0, GCWT = 0, GTOTAL = 0;
        }

        @foreach (var group in Model.GroupBy(a => a.MAIN_VOTE))
        {

            <tr style="background-color:#F5F5F5">

                <td colspan="10">
                    @group.Key - <b>@group.Select(a => a.MAIN_VOTE_NAME).FirstOrDefault()</b>
                </td>
            </tr>

            <tr style="background-color:#F5F5F5">
                <td>#</td>
                <td>Vote</td>
                <td>Vote Name</td>
                <td style="text-align: center">NHIF</td>
                <td style="text-align: center">PSSSF</td>
                <td style="text-align: center">ZSSF</td>
                <td style="text-align: center">TUGHE</td>
                <td style="text-align: center">TALGWU</td>
                <td style="text-align: center">CWT</td>
                <td style="text-align: center">TOTAL</td>
            </tr>

            foreach (var item in group)
            {
                i++;
                TRA = 0; NHIF = 0; PSSSF = 0; ZSSF = 0; TUGHE = 0; TALGWU = 0; CWT = 0; TOTAL = 0;

                TRA += Decimal.Parse(item.TRA.ToString());

                NHIF += Decimal.Parse(item.NHIF.ToString());
                PSSSF += Decimal.Parse(item.PSSSF.ToString());
                ZSSF += Decimal.Parse(item.ZSSF.ToString());
                TUGHE += Decimal.Parse(item.TUGHE.ToString());
                TALGWU += Decimal.Parse(item.TALGWU.ToString());
                CWT += Decimal.Parse(item.CWT.ToString());

                TOTAL += Decimal.Parse(item.LAPF.ToString()) + Decimal.Parse(item.NSSF.ToString()) + Decimal.Parse(item.PPF.ToString()) + Decimal.Parse(item.GEPF.ToString()) + Decimal.Parse(item.ZSSF.ToString()) + Decimal.Parse(item.TUGHE.ToString()) + Decimal.Parse(item.TALGWU.ToString()) + Decimal.Parse(item.NHIF.ToString()) + Decimal.Parse(item.PSPF.ToString()) + Decimal.Parse(item.CWT.ToString());

                GTRA += Decimal.Parse(item.TRA.ToString());
                GNHIF += Decimal.Parse(item.NHIF.ToString());
                GPSSSF += Decimal.Parse(item.PSPF.ToString());
                GNSSF += Decimal.Parse(item.NSSF.ToString());
                GZSSF += Decimal.Parse(item.ZSSF.ToString());
                GTUGHE += Decimal.Parse(item.TUGHE.ToString());
                GTALGWU += Decimal.Parse(item.TALGWU.ToString());
                GCWT += Decimal.Parse(item.CWT.ToString());

                GTOTAL += Decimal.Parse(item.LAPF.ToString()) + Decimal.Parse(item.NSSF.ToString()) + Decimal.Parse(item.PPF.ToString()) + Decimal.Parse(item.GEPF.ToString()) + Decimal.Parse(item.ZSSF.ToString()) + Decimal.Parse(item.TUGHE.ToString()) + Decimal.Parse(item.TALGWU.ToString()) + Decimal.Parse(item.NHIF.ToString()) + Decimal.Parse(item.PSPF.ToString()) + Decimal.Parse(item.CWT.ToString());

                <tr>
                    <td>@i</td>

                    <td>
                        @item.VOTE
                    </td>
                    <td>
                        @item.VOTE_NAME
                    </td>

                    <td style="text-align: right">
                        @String.Format("{0:#,0.00}", item.NHIF)

                    </td>
                    <td style="text-align: right">
                        @String.Format("{0:#,0.00}", item.PSSSF)

                    </td>

                    <td style="text-align: right">
                        @String.Format("{0:#,0.00}", item.ZSSF)

                    </td>
                    <td style="text-align: right">
                        @String.Format("{0:#,0.00}", item.TUGHE)

                    </td>
                    <td style="text-align: right">
                        @String.Format("{0:#,0.00}", item.TALGWU)

                    </td>
                    <td style="text-align: right">
                        @String.Format("{0:#,0.00}", item.CWT)

                    </td>
                    <td style="text-align: right">
                        @String.Format("{0:#,0.00}", TOTAL)
                    </td>

                </tr>
            }

            <tr style="background-color:#F5F5F5">
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>Sub Total</td>
                <td style="text-align: right">@String.Format("{0:#,0.00}", NHIF) </td>
                <td style="text-align: right">@String.Format("{0:#,0.00}", PSSSF) </td>
                <td style="text-align: right">@String.Format("{0:#,0.00}", ZSSF) </td>
                <td style="text-align: right">@String.Format("{0:#,0.00}", TUGHE) </td>
                <td style="text-align: right">@String.Format("{0:#,0.00}", TALGWU) </td>
                <td style="text-align: right">@String.Format("{0:#,0.00}", CWT) </td>
                <td style="text-align: right">@String.Format("{0:#,0.00}", TOTAL) </td>
            </tr>
        }

        <tr style="background-color:#ddd6d6">
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>Grand Total</td>
            <td style="text-align: right">@String.Format("{0:#,0.00}", GNHIF) </td>
            <td style="text-align: right">@String.Format("{0:#,0.00}", GPSSSF) </td>
            <td style="text-align: right">@String.Format("{0:#,0.00}", GNSSF) </td>
            <td style="text-align: right">@String.Format("{0:#,0.00}", GZSSF) </td>
            <td style="text-align: right">@String.Format("{0:#,0.00}", GTUGHE) </td>
            <td style="text-align: right">@String.Format("{0:#,0.00}", GTALGWU) </td>
            <td style="text-align: right">@String.Format("{0:#,0.00}", GCWT) </td>
            <td style="text-align: right">@String.Format("{0:#,0.00}", GTOTAL) </td>
        </tr>
    </table>
</div>
