@model IEnumerable<IFMIS.Areas.PayrollManagement.Models.Employee>
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<br />
<!-- MAIN CONTENT -->
<!-- MAIN CONTENT -->
<div id="content">
    <!-- widget grid -->
    <section id="widget-grid" class="">
        <!-- row -->
        <div class="row">
            <!-- NEW WIDGET START -->
            <article class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <!-- Widget ID (each widget will need unique ID)-->
                <div class="jarviswidget jarviswidget-color-white" id="wid-id-0" data-widget-editbutton="false" data-widget-colorbutton="false" data-widget-deletebutton="false" data-widget-togglebutton="false">
                    <!-- widget options:
                    usage: <div class="jarviswidget" id="wid-id-0" data-widget-editbutton="false">
                    data-widget-colorbutton="false"
                    data-widget-editbutton="false"
                    data-widget-togglebutton="false"
                    data-widget-deletebutton="false"
                    data-widget-fullscreenbutton="false"
                    data-widget-custombutton="false"
                    data-widget-collapsed="true"
                    data-widget-sortable="false"
                    -->
                    <header>
                        <span class="widget-icon"> <i class="fa fa-table"></i> </span>
                        <h2>Employee List</h2>
                    </header>
                    <!-- widget content -->
                    <div class="widget-body">
                        <div class="col-md-6" style="padding-top:20px">
                            <div class="col-md-3">
                                <button type="button" style="margin-bottom:20px" class="btn btn-info" onclick="">
                                    <span class="glyphicon glyphicon-thumbs-up" aria-hidden="true"></span>
                                    Approve
                                </button>
                            </div>
                            <div class="col-md-3">
                                <button type="button" style="margin-bottom:20px" class="btn btn-success" onclick="">
                                    <span class="glyphicon glyphicon-thumbs-down" aria-hidden="true"></span>
                                    Reject
                                </button>
                            </div>
                        </div>
                        <br />
                        <table id="tblDataList" class="table table-striped table-bordered table-hover table-condensed table-condensed">
                            <thead>
                                <tr>
                                    <th>
                                        SN
                                    </th>
                                    <th>
                                        @Html.DisplayNameFor(model => model.CheckNumber)
                                    </th>
                                    <th>
                                        @Html.DisplayNameFor(model => model.ForceNumber)
                                    </th>
                                    <th>
                                        @Html.DisplayNameFor(model => model.FirstName)
                                    </th>
                                    <th>
                                        @Html.DisplayNameFor(model => model.MiddleName)
                                    </th>
                                    <th>
                                        @Html.DisplayNameFor(model => model.LastName)
                                    </th>
                                    <th>
                                        @Html.DisplayNameFor(model => model.Department.DeptName)
                                    </th>
                                    <th>
                                        @Html.DisplayNameFor(model => model.Workstation.WorkstationName)
                                    </th>
                                    <th>
                                        @Html.DisplayNameFor(model => model.NationalId)
                                    </th>
                                    <th>
                                        @Html.DisplayNameFor(model => model.SalaryAmount)
                                    </th>
                                    <th>
                                        @Html.DisplayNameFor(model => model.AccountNumber)
                                    </th>
                                    <th><input type="checkbox" class="cbCheckAll" /></th>
                                </tr>
                            </thead>
                            @{
                                int i = 0;
                            }
                            <tbody>
                                @foreach (var item in Model)
                                {
                                    i++;
                                    <tr>
                                        <td>
                                            @i
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.CheckNumber)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.ForceNumber)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.FirstName)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.MiddleName)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.LastName)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.Department.DeptName)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.Workstation.WorkstationName)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.NationalId)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.SalaryAmount)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.AccountNumber)
                                        </td>
                                        <td>
                                            <input type="checkbox" value="@item.EmployeeId" class="checkBoxConfirm">
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                        <!-- end widget content -->
                    </div>
                    <!-- end widget div -->
                </div>
                <!-- end widget -->
            </article>
        </div>
    </section>
    <!-- end widget grid -->
</div>
@section pagespecific {
    <link href="~/Content/DataTable/css/jquery.dataTables.css" rel="stylesheet" />
    <script src="~/assets/DataTable/jquery.dataTables.min.js"></script>
    <!-- PAGE RELATED PLUGIN(S) -->
    <script type="text/javascript">
        $(document).ready(function () {
            $("#tblDataList").DataTable();
            $("#divLoader").show();
        });

        $(".cbCheckAll").click(function () {
            $(".checkBoxConfirm").prop('checked',
                $(this).prop('checked'));
        });

        var approved = function () {
            var csvIds = [];
            $("input:checkbox.checkBoxConfirm").each(function () {
                if ($(this).prop("checked")) {
                    csvIds.push($(this).val());
                }
            });

            if (csvIds.length == 0) {
                alert("No record selected!");
                return;
            }

            var result = confirm("Are you sure you want to confirm.?");

            if (!result) {
                return;
            }

            $("#divLoader").show();

            var url = '@Url.Action("ConfirmDeductions", "Deductions")';

            $.ajax({
                type: "POST",
                url: url,
                data: { ids: csvIds },
                success: function (response) {
                    if (response == "Success") {
                        alert("Successfully Confirmed");
                        location.reload();
                    }
                },
                error: function (err) {
                    alert(err.statusText);
                },
            });
        };
    </script>
}