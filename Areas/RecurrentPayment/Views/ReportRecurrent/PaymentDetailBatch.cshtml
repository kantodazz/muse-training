@model IEnumerable<IFMIS.Areas.RecurrentPayment.Models.PaymentDetailReport>

<style type="text/css">
    * {
        box-sizing: border-box;
    }

    body {
        font-family: 'Gill Sans','lucida grande', helvetica, arial, sans-serif;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        border-spacing: 0;
        margin: 0px;
    }

    td, th {
        border: 1px solid;
        padding: 8px;
    }

    .alinearDerecha {
        text-align: right;
    }

    .negrita {
        font-weight: bold;
    }

    thead {
        display: table-row-group;
    }

    tr {
        page-break-inside: avoid;
    }
</style>



<div class="row no-print">
    <div class="cke_panel_container" style="width:80%">
        <div class="col-md-12">

            <div>

                <br /><br /><br />
                @{

                    var ps = ViewBag.Paystation;
                    var pb = ViewBag.Paymentbatch;
                }


                <dl class="dl-horizontal">
                    <dt></dt>
                    <dd></dd>
                    <dt></dt>
                    <dd></dd>
                    <dt>Title:</dt>
                    <dd>PAYMENTS SUMMARY BY BATCH</dd>
                    @*<dt>

                        PayStation:

                    </dt>

                    <dd style="text-align:left">
                        @ps.PayStationName
                    </dd>*@

                    <dt>
                        Batch No:
                    </dt>

                    <dd>
                        @ViewBag.PaymentBatch
                    </dd>

                    <dt>
                        Batch Name:
                    </dt>

                    <dd>
                        @ViewBag.BatchDesc
                    </dd>

                    <dt>
                        Pay Category:
                    </dt>

                    <dd>
                        @ViewBag.PaymentCategory
                    </dd>

                </dl>
            </div>

        </div>
    </div>
</div>

<div class="panel panel-default">
        <!-- Default panell contents -->
        <div class="panel-heading">Beneficiary Report</div>
        <div class="panel-body">
            <table class="table table-bordered table-condensed table-hover table-responsive table-striped">
                <thead>

                </thead>
                @{
                    int i = 0;
                    decimal? totalAmount = 0;
                    decimal? grandTotalAmount = 0;
                }

                @foreach (var group in Model.GroupBy(a => a.PayStationName))
                {

                    totalAmount = 0;

                    <tr>
                        <td colspan="9">
                            <b>@group.Key - @group.Select(a => a.PayStationName).FirstOrDefault()</b>
                        </td>
                    </tr>

                    <tr>
                        <th>#</th>
                        <th>Beneficiary Code</th>
                        <th>Beneficiary Name</th>
                        <th>Depertment</th>
                        <th>Account No</th>
                        <th>Bank Name</th>
                        <th>Amount</th>
                        <th>Payment Desc</th>
                        <th>Status</th>
                    </tr>
                    foreach (var item in group)
                    {
                        i++;
                        totalAmount += item.Amount;
                        grandTotalAmount += item.Amount;

                        <tr>
                            <td>@i</td>

                            <td>
                                @Html.DisplayFor(modelItem => item.BeneficiaryCode)
                            </td>

                            <td>
                                @Html.DisplayFor(modelItem => item.BeneficiaryName)
                            </td>

                            <td style="text-align: left">
                                @Html.DisplayFor(modelItem => item.BenDepartment)
                            </td>

                            <td>
                                @Html.DisplayFor(modelItem => item.BeneficiaryAccountNo)
                            </td>

                            <td style="text-align: left">
                                @Html.DisplayFor(modelItem => item.BankName)
                            </td>

                            <td style="text-align: right">
                                @Html.DisplayFor(modelItem => item.Amount)
                            </td>

                            <td style="text-align: left">
                                @Html.DisplayFor(modelItem => item.PaymentDescription)
                            </td>

                            <td style="text-align: left">
                                @Html.DisplayFor(modelItem => item.OverallStatus)
                            </td>
                        </tr>
                    }

                    @*<tr style="background-color:#F5F5F5">
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td style="text-align: left">Sub Total</td>
                        <td style="text-align: right"><b>@string.Format("{0:#,0.00}", totalAmount)</b></td>
                        <td></td>
                    </tr>*@
                }


                <tr style="background-color:#ddd6d6">
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td style="text-align: left">Grand Total</td>
                    <td style="text-align: right"><b>@string.Format("{0:#,0.00}", grandTotalAmount)</b></td>
                    <td></td>
                    <td></td>
                </tr>
            </table>

        </div>
    </div>