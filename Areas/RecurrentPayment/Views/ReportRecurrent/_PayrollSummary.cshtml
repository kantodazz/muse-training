@model IEnumerable<IFMIS.Areas.RecurrentPayment.Models.geftp_payroll_vwVM>

@{
    string imgSrc = "";

    if (Model.Select(a => a.GroupLogo != null).FirstOrDefault())
    {
        imgSrc = "/Media/Images/" + Model.Select(a => a.GroupLogo).FirstOrDefault();
    }
}

<style>
    tr, td {
        height: 34px;
    }

    body {
        font-family: 'Gill Sans','lucida grande', helvetica, arial, sans-serif;
    }

    tbody {
        border-top: none;
        border-left: none;
        border-right: none;
        border-bottom: 1px solid #000000;
    }
</style>

<div class="row">
    <div class="col-md-8" style="text-align: center">
        <img src="@Server.MapPath(imgSrc)" width="150" height="150" class="img-responsive" />
        <h2>
            @Model.Select(a => a.GroupName).FirstOrDefault()
        </h2>
        <h3>PAYROLL SUMMARY</h3>
        <h3>
           Payroll Month : @ViewBag.CheckDate
            </h3>
    </div>
</div>

<br />
<div id="content">
    <div class="panel panel-default">
        <!-- Default panell contents -->
        <div class="panel-body">
            <div class="panel-body">
                <table  border="1" style="border-top:1px solid #000000; border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000" frame="hsides" rules="groups">
                    <colgroup align="center"></colgroup>
                    <colgroup align="left"></colgroup>
                    <colgroup align="center"></colgroup>
                    <colgroup align="center"></colgroup>
                    <colgroup align="center"></colgroup>
                        <tr>
                            <th style="border-bottom:1px solid #000000; border-bottom-width:inherit">
                                @Html.DisplayNameFor(model => model.BeneficiaryCategory)
                            </th>
                            <th style="border-bottom:1px solid #000000; border-bottom-width:inherit">
                                @Html.DisplayNameFor(model => model.NumEmp)
                            </th>
                            <th style="border-bottom:1px solid #000000; border-bottom-width:inherit">
                                @Html.DisplayNameFor(model => model.OriginalNetAmount)
                            </th>
                            <th style="border-bottom:1px solid #000000; border-bottom-width:inherit">
                                @Html.DisplayNameFor(model => model.TotalAllowanceAmount)
                            </th>
                            <th style="border-bottom:1px solid #000000; border-bottom-width:inherit">
                                @Html.DisplayNameFor(model => model.TotalDeductionAmount)
                            </th>
                            <th style="border-bottom:1px solid #000000; border-bottom-width:inherit">
                                @Html.DisplayNameFor(model => model.FinalNetAmount)
                            </th>
                        </tr>

                    @{
                        decimal? totalAllowance = 0, originalNetAmount = 0, totalDeductionAmount = 0, finalNetAmount = 0, numEmp = 0;
                    }

                    <tbody>

                        @foreach (var item in Model)
                        {
                            totalAllowance += item.TotalAllowanceAmount != null ? item.TotalAllowanceAmount : 0;
                            originalNetAmount += item.OriginalNetAmount != null ? item.OriginalNetAmount : 0;
                            totalDeductionAmount += item.TotalDeductionAmount != null ? item.TotalDeductionAmount : 0;
                            finalNetAmount += item.FinalNetAmount != null ? item.FinalNetAmount : 0;
                            numEmp += item.NumEmp;
                            <tr>
                                <td style="border-bottom:1px solid #000000; border-bottom-width:inherit">
                                    @Html.DisplayFor(modelItem => item.BeneficiaryCategory)
                                </td>
                                <td align="right" style="border-bottom:1px solid #000000; border-bottom-width:inherit">
                                    @Html.DisplayFor(modelItem => item.NumEmp)
                                </td>
                                <td align="right" style="border-bottom:1px solid #000000; border-bottom-width:inherit">
                                    @Html.DisplayFor(modelItem => item.OriginalNetAmount)
                                </td>
                                <td align="right" style="border-bottom:1px solid #000000; border-bottom-width:inherit">
                                    @Html.DisplayFor(modelItem => item.TotalAllowanceAmount)
                                </td>
                                <td align="right" style="border-bottom:1px solid #000000; border-bottom-width:inherit">
                                    @Html.DisplayFor(modelItem => item.TotalDeductionAmount)
                                </td>
                                <td align="right" style="border-bottom:1px solid #000000; border-bottom-width:inherit">
                                    @Html.DisplayFor(modelItem => item.FinalNetAmount)
                                </td>
                            </tr>
                        }

                        <tr>
                            <td><b>Grand Total</b></td>
                            <td style="text-align: right"><b>@string.Format("{0:N0}", numEmp)</b></td>
                            <td style="text-align: right"><b>@string.Format("{0:#,0.00}", originalNetAmount)</b></td>
                            <td style="text-align: right"><b>@string.Format("{0:#,0.00}", totalAllowance)</b></td>
                            <td style="text-align: right"><b>@string.Format("{0:#,0.00}", totalDeductionAmount)</b></td>
                            <td style="text-align: right"><b>@string.Format("{0:#,0.00}", finalNetAmount)</b></td>
                        </tr>
                    </tbody>
                </table>

                </div>
            </div>
        </div>
    </div>

<br /><br />
<table style="width:100%" border="0">

    <tbody>
        <tr>
            <td>Prepared By </td>
            <td>@Model.Select(a=>a.PreparedBy).FirstOrDefault()</td>
            <td style="border-bottom:1px solid #000000; border-top:none; border-left:none; border-right:none;"></td>
            <td>@string.Format("{0:dd MMMM yyyy}", Model.Select(a=>a.CreatedAt).FirstOrDefault())</td>
        </tr>
    </tbody>
    <tr>
        <td></td>
        <td></td>
        <td>Signature </td>
        <td></td>
    </tr>

    <tr>
        <td style="width:15%">Confirmed By </td>
        <td style="width:30%; text-align:justify">Chief Accountant/DT/Accountant</td>
        <td style="border-bottom:1px solid #000000; border-top:none; border-left:none; border-right:none; width:35%"> </td>
        <td style="border-bottom:1px solid #000000; border-top:none; border-left:none; border-right:none; width:20%"> </td>
    </tr>

    <tr>
        <td></td>
        <td></td>
        <td>Name</td>
        <td>Signature</td>
    </tr>

    <tr>
        <td>Verified By  </td>
        <td style="width:30%; text-align:justify">DAHRAM/DHRO</td>
        <td style="border-bottom:1px solid #000000; border-top:none; border-left:none; border-right:none;"> </td>
        <td style="border-bottom:1px solid #000000; border-top:none; border-left:none; border-right:none;"> </td>
    </tr>

    <tr>
        <td></td>
        <td></td>
        <td>Name</td>
        <td>Signature </td>
    </tr>

    <tr>
        <td> Approved By  </td>
        <td style="width:30%; text-align:justify"> Accounting Officer</td>
        <td style="border-bottom:1px solid #000000; border-top:none; border-left:none; border-right:none;"> </td>
        <td style="border-bottom:1px solid #000000; border-top:none; border-left:none; border-right:none;"> </td>
    </tr>

    <tr>
        <td>  </td>
        <td>  </td>
        <td> Name  </td>
        <td> Signature </td>
    </tr>
</table>
