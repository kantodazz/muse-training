@model IFMIS.Areas.RecurrentPayment.Models.SalarySlipVM

@{ 
    decimal? orignalNetAmount = Model.LawsonPersonalDetail.OriginalNetAmount ?? 0;
}

<style type="text/css">
    body {
        font-family: 'Gill Sans','lucida grande', helvetica, arial, sans-serif;
    }

    table {
        width: 80%;
        border-collapse: collapse;
        /*border-spacing: 0;*/
        /*//margin: 10px;*/
        font-size: 18px;
    }

    td, th {
        padding: 8px;
    }

    #background {
        background-size: cover;
        position: absolute;
        background-color: transparent;
        opacity: 0.1;
        background-position: center;
        padding-left: 150px;
        padding-top: 30px;
        filter: alpha(opacity=50);
    }

    /*#bg-text {
        color: lightgrey;
        font-size: 120px;
        text-align: center;
        opacity: 0.25;
        filter: alpha(opacity=50);
        background-color: transparent;
    }*/

    #slip {
        padding-left: 60px;
        padding-top: 30px;
        background-color: #EAE8E7;
        height: 40%;
    }
</style>
<div id="background">
    <img src="@Server.MapPath("~/Media/Images/bunge.jpg")" />
</div>
<div id="slip">
    <div>
        &nbsp &nbsp&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp&nbsp &nbsp &nbsp &nbsp
        &nbsp &nbsp&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp&nbsp &nbsp &nbsp &nbsp
        <div>
            <table>
                <tr>
                    <td style="font-size:18px">
                        &nbsp &nbsp
                        &nbsp &nbsp &nbsp &nbsp
                    </td>
                </tr>
            </table>
            <table>
                <tr>
                    @if (Model.PaySlipForDeduction == true)
                    {
                        <td style="font-size:18px">
                            <strong>@Model.PersonalDetail.DeptCode</strong>
                            &nbsp &nbsp
                            <strong>@Model.PersonalDetail.BeneficiaryCode</strong>
                            &nbsp &nbsp &nbsp &nbsp
                            <strong style="font-size:20px">@Model.PersonalDetail.BeneficiaryName </strong>
                        </td>
                    }
                    else
                    {
                        <td style="font-size:18px">
                            @if (Model.LawsonPersonalDetail != null)
                            {
                                <strong>@Model.LawsonPersonalDetail.DeptCode</strong>
                            }
                            &nbsp &nbsp

                            @if (Model.LawsonPersonalDetail != null)
                            {
                                <strong>
                                    @Model.LawsonPersonalDetail.BeneficiaryCode
                                </strong>
                            }
                            &nbsp &nbsp &nbsp &nbsp
                            @if (Model.LawsonPersonalDetail != null)
                            {
                                <strong style="font-size:20px">@Model.LawsonPersonalDetail.BeneficiaryName </strong>
                            }
                        </td>
                    }
                </tr>
            </table>
        </div>
        <table>
            <thead>
                <tr>
                    <th style="text-align: left"> DESCRIPTION </th>
                    <th style="text-align: right"> BALANCE </th>
                    <th style="text-align: right"> AMOUNT </th>
                </tr>
            </thead>
            @{
                decimal? tatoldeduction = 0;
                decimal? tatolAllowance = 0;
            }
            <tbody>
                <tr>
                    @if (Model.PaySlipForDeduction == true)
                    {
                        <td> Basic Salary </td>
                        <td></td>
                        <td style="text-align: right">@string.Format("{0:#,0.00}", Model.PersonalDetail.OriginalNetAmount)</td>
                    }
                    else
                    {
                        <td> Basic Salary </td>
                        <td></td>
                        if (Model.LawsonPersonalDetail != null)
                        {
                            <td style="text-align: right">@string.Format("{0:#,0.00}", orignalNetAmount)</td>
                        }
                    }
                </tr>
                @foreach (var earning in Model.Earnings)
                {
                    tatolAllowance += earning.AllowanceAmount;
                    <tr>
                        <td>@earning.AllowanceName</td>
                        <td></td>
                        <td style="text-align: right">@string.Format("{0:#,0.00}", earning.AllowanceAmount)</td>
                    </tr>
                }
                @foreach (var Lawsondeductions in Model.LawsonDeductions)
                {
                    tatoldeduction += Lawsondeductions.MonthlyDeductionAmount;
                    <tr>
                        <td>@Lawsondeductions.DedDescription</td>
                        <td style="text-align: right">@string.Format("{0:#,0.00}", Lawsondeductions.BalanceAmount)</td>
                        <td style="text-align: right">@string.Format("{0:#,0.00}", Lawsondeductions.MonthlyDeductionAmount)</td>
                    </tr>
                }
                @foreach (var deductions in Model.Deductions)
                {
                    tatoldeduction += deductions.MonthlyDeductionAmount;
                    <tr>
                        <td>@deductions.DedDescription</td>
                        <td style="text-align: right">@string.Format("{0:#,0.00}", deductions.BalanceAmount)</td>
                        <td style="text-align: right">@string.Format("{0:#,0.00}", deductions.MonthlyDeductionAmount)</td>
                    </tr>
                }
            </tbody>
            <tfoot>
                <tr>
                    <td><strong> NET AMOUNT DUE </strong></td>
                    @{
                        DateTime date = Convert.ToDateTime(Model.CurrentCheckdate);
                    }
                    <td style="text-align: right"><strong>@date.ToString("dd/MM/yyyy")</strong> </td>
                    @if (Model.PaySlipForDeduction == true)
                    {
                        if (tatolAllowance == 0)
                        {
                            tatolAllowance = 0;
                        }

                        <td style="text-align: right"><strong>@string.Format("{0:#,0.00}", ((tatolAllowance + Model.PersonalDetail.OriginalNetAmount) - tatoldeduction))</strong> </td>
                    }
                    else
                    {
                        if (Model.LawsonPersonalDetail != null)
                        {
                            <td style="text-align: right"><strong>@string.Format("{0:#,0.00}", ((tatolAllowance + orignalNetAmount) - tatoldeduction))</strong> </td>
                        }
                    }

                </tr>
            </tfoot>
        </table>
    </div>
</div>
